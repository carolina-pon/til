# 今日やったこと
- RSpec5章やる
  - 4章も前回あんまり頭に入ってなかったので、4章から読み進めた。
  ボリュームがあったので時間はかかってしまったけど、前まで呪文のように感じていた文章とコードが大分読めるようになってうれしい。
  - 以下雑多メモ。
    - P56　factoryで2つのuserオブジェクトを作成する際、なぜエラーになるのか。
    複数userを生成する際に重複してはいけない値が重複してしまいエラーになる。(ここではユニーク制約を付けているemailが重複したため。)明示的に異なる値を設定しない限り、常にfactoryが、(factoryに書いた)「tester@example.com」という値をメールアドレスの値として設定してしまう。
    こういった時はシーケンスを使用してユニークバリデーションを持つフィールドを扱うことができる。

    ```
    e.g.
    sequence(:email){ |n| "tester#{n}@example.com" }
    #=> tester1@example.com
    #=> tester2@example.com
    # 新しいオブジェクトを生成するたびにカウンタの値を+1していく。
    ```
    - ファクトリでも関連が使える。
    - ファクトリ内での重複をなくす方法
      1. ファクトリの継承。継承の場合、継承元の内部で入れ子になっている。クラスの指定もしなくてよくなる。スペック側は変更しなくてもパスする。
      2. トレイトの使用。スペックの変更の必要あり。複雑なオブジェクトを構築できる。
    - コールバック…ファクトリがオブジェクトをcreateする前、またはした後に何かしら追加のアクションを実行できる。buildされたり、stubされた時も同様。
    - 複雑な関連を持つオブジェクトを作成→create_listメソッドを使用する。
    - devise認証が必要なコントローラのアクションに対してはユーザーのログインをシミュレートするヘルパーを用いる。
      - deviseを使用してない場合はまたシミュレートが違う。has_secure_passwrdなら自分でヘルパーメソッド定義する。

      ```
      e.g.
      def sign_in(user)
        cookies[:auth_token] = user.auth_token
      end
      ```
    

# 明日やること
- instaクローン課題01終了目標にやる(これがメイン)
- 案件のissueに着手
- RSpec5章のこり