### HTTPSの仕組み
***
#### HTTPS「HTTP over SSL/TLS」 SSL「Secure Sockets Layer」 TLS「Transport Layer Security」
- HTTPの通信において、SSL・TLSを利用することでWebサイトを安全できる
#### 安全性を確保する３つの仕組み
- 盗聴防止(暗号化通信)
  - Webサイトを閲覧する際、実際にはいくつものサーバーを経由する→第三者が通信内容を傍受することは容易・・・
  - 傍受されて内容を解読されないよう、データを暗号化して送信して第三者からの傍受を防ぐ
- 改ざん防止
  - ネットバンキングにおいて、振込先情報などの改ざん防止の対策として「メッセージダイジェスト」が利用される
  - メッセージダイジェスト→あるデータから一意の短いデータ(ハッシュ値)を取り出す計算のこと
  - データ送受信時にハッシュ値を比較して改ざんを検知できる
- なりすまし防止(Webサイト運用元の確認)
  - Webサーバーに「SSLサーバー証明書」と呼ばれる電子証明書を配置しておく→接続時に検証→Webサイトを運営する会社の身元を確認できる
  - SSLサーバー証明書は発行を認められた「認証局」による運営元の認証作業を通過する必要がある
  - 信頼できない発行元のSSLサーバー証明書が利用されているとWebブラウザ上に警告画面が表示される
***
### HTTPSのやりとり
***
#### SSL/TLSハンドシェイク
- Webサイト閲覧時、HTTPSの利用で「盗聴」「改ざん」「なりすまし」などの危険性は防げる
‐ しかしWebブラウザ・サーバーおいていきなりHTTPS通信が始まるわけではない(以下の４フェーズがある)
1. 暗号化方式の決定
  - 暗号化方式は多数存在する→Webブラウザ・サーバーの両方が利用可能な暗号化方式を決めなければならない
  - 暗号化方式の決定・HTTPSで利用されるSSL/あるいはTLSのバージョンや改ざん防止で利用されるメッセージダイジェストの方式も決定する
2. 通信相手の照明
  - Webブラウザが通信しているWebサーバーが正しい相手なのかSSLサーバー証明書で確認
  - 正しいWebサーバーだと確認できない場合→Webブラウザ上に警告を表示
3. 鍵の交換
  - データ転送に利用する「鍵」の交換をする
  - 鍵はデータを転送する際の暗号化・および暗号化されたデータうぃ復号する際に利用される
4. 暗号化方式の確認
  - 最後のフェーズでは、実際に利用する暗号化方式の最終確認作業を行う
  - このフェーズが完了→WebブラウザとWebサーバー間において暗号化通信が __開始__される
#### 以上４つのフェーズをSSL/TLSハンドシェイクと呼ぶ
***
### ステートフルとステートレス
***
#### HTTPはステートレスで非常にシンプルなプロトコル
- ステートレス(Stateless)→「状態を保持しない」の意味
  - HTTPではリクエスト/レスポンスの１往復のやりとりが完結された処理とみなす→複数の処理を関連づける仕組みがない
- ステートフル(Statefull)→「状態を保持する」意味　次の処理内容に反映させる方式
   - １対１の処理であれば状態を保持することが負担にならない→多数のクライアントに対し１台のサーバーで処理→サーバーに負担がかかる
- 多数のクライアントからの接続が発生するWebシステムで利用されるHTTPでは、多くの処理を素早く処理するため「ステートレス」な設計が適している
#### HTTPの弱点
- Webが進化する昨今、HTTPがステートレスだと困ることが増えてきた(e.g.ショッピングサイトでの商品を選ぶ→買い物かごに入れる　といった動作)
- 実際のショッピングサイトでは、買い物かごに入れた商品を確認・購入したりできる
  - 以前の情報を踏まえて次の動作をするといった、「状態を保持し管理する」HTTPを補完する別の仕組みが導入されているため




