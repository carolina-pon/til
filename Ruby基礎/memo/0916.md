## 4.7~ 配列についてもっと詳しく
- 添え字を2つ使うと、添え字の位置と取得する長さを指定することができる
- この場合、配列が返ってくる
```
配列[位置, 取得する長さ]

a = [1,2,3,4,5]
a[1,3] #=> [2,3,4]
```
- values_atメソッド…取得したい要素の添え字を複数指定できる
```
a = [1,2,3,4,5]
a.values_at(0,2,4) #=>[1,3,5]
```
- 「配列の長さ-1」を指定すれば、最後の要素を取得できる
```
a = [1,2,3]
a[a.size - 1] #=> 3

#Rubyでは添え字に負の値が使えるので-1は最後の要素、-2は最後から2番目の要素というように指定できる
a = [1,2,3]
#最後の要素を取得する
a[-1] #=> 3
#最後から2番目の要素を取得する
a[-2] #=> 2
#最後から2番目の要素から2つの要素を取得する
a[-2,2] #=> [2,3]
```
- 配列にはlastというメソッドがある
  - これを呼ぶと配列の最後の要素を取得できる/引数に0以上の数値を渡すと最後のn個の要を取得できる
- lastの反対のfirstもある　先頭の要素を取得するメソッド
```
a = [1,2,3]
a.last #=> 3
a.last(2) #=> [2,3]

a= [1,2,3]
a.first #=> 1
a.first(2) #=> [1,2]
```
## 様々な要素の変更方法
- 値を変更する場合も負の添え字が使えるが、元の大きさを超えるような添え字を指定するとエラーになる
- 開始位置と長さを指定して要素を置き換えることもできる
- pushメソッドを使っても要素を追加できる/複数の値追加も可能
- 指定した値に一致する要素を削除したい場合はdeleteメソッドを使う
## 配列の連結
- 2つの配列を連結したい場合 concatメソッドか+演算子を使う
- 違いは元の配列を変更するか(破壊的かどうか)という点
```
#concatメソッドを使って配列を連結すると元の配列(メソッドを呼び出した側の配列)が変更される
a = [1]
b = [2,3]
a.concat(b) #=> [1,2,3]

#aは変更される(破壊的)
a #=> [1,2,3]

#bは変更されない
b #=> [2,3]


# +を使うと元の配列を変更せず、新しい配列を作成する
a = [1]
b = [2,3]
a + b #=> [1,2,3]

#aもbも変更されない(非破壊的)
a #=> [1]
b #=> [2,3]
```
- 基本は+演算子を使う！(破壊的な変更は大きなプログラムやフレームワーク内で悪影響を及ぼす場合がある)
## 配列の和集合、差集合、積集合
- Rubyの配列は|,-,&を使って、和集合、差集合、積集合を求めることができる
```
# |は和集合を求める演算子　2つの配列の要素を全て集め、重複しないようにして返す
a = [1,2,3]
b = [3,4,5]
a | b #=> [1,2,3,4,5]

# -は差集合を求める演算子　左の配列から右の配列に含まれる要素を取り除く
a = [1,2,3]
b = [3,4,5]
a - b #=> [1,2]

# &は積集合を求める演算子　2つの配列に共通する要素を返す
a = [1,2,3]
b = [3,4,5]
a & b #=> [3]
```
- |.-,&のいずれも元の配列は変更しない(非破壊的)
- Rubyには配列よりも効率的に集合を扱える __Setクラス__ もある
  - 本格的な集合演算をする場合は配列よりもSetクラスを使うほうが良い
```
require "set"

a = Set.new([1,2,3])
b = Set.new([3,4,5])
a | b #=> <Set: {1,2,3,4,5}>
a - b #=> <Set: {1,2}>
a & b #=> <Set: {3}>
```
## 多重代入で残りの全要素を配列として受け取る
- 多重代入では左辺の変数よりも右辺の個数が多い場合は、はみ出した値が切り捨てられる
- __左辺の変数に*を付けると残りの全要素を配列として受け取ることができる__
```
e,f = 100,200,300
e #=> 100
f #=> 200
#これだとはみ出してるので切り捨てられちゃう

e, *f = 100,200,300
e #=> 100
f #=> [200,300]
# *つけると残りの全要素が配列として受け取れる
```